# Γεννήτρια Καταλόγου Εκλογέων Επιλογής Διευθυντών

Το παρών είναι μια βοηθητική εφαρμογή (Python script) που γράφτηκε (στα γρήγορα) στην [ΔΔΕ Ηρακλείου](http://dide.ira.sch.gr),
τον Ιούνιο του 2015, για να βοηθήσει την υπηρεσία στην αυτόματη δημιουργία των εκλογικών καταλόγων της μυστικής ψηφοφορίας,
όπως αυτή ορίζεται με τον _4327/15 ΦΕΚ Α΄ 50/14-5-2015_

Η εφαρμογή λειτουργεί αποκλειστικά με δεδομένα που μπορούν να εξαχθούν απο τα στατιστικά της εφαρμογής
[MySchool](https://myschool.sch.gr/). Όσο ποιο πλήρη και ενημερωμένα είναι τα στοιχεία της κάθε σχολικής μονάδας στο
MySchool, τόσο ποιο έγκυρα θα είναι τα αποτελέσματα του script.

To script αν και λειτουργικό είναι ακόμα υπο εξέλιξη. Τα αποτελέσματα που παράγει είναι λίγο πολύ της παρακάτω μορφής :

![](https://github.com/dideher/ekloges_dieuthinton/blob/master/images/db784521dc06fa3e716660840522ac2c.jpg)

Οι βασικές δυνατότητες του script είναι οι παρακάτω :

* Παραγωγή εκλογικών καταλόγων για συγκεκριμένη σχολική μονάδα ή για όλες τις μονάδες του φορέα κατά MySchool
* Καταγραφή των αποτελεσμάτων σε ξεχωριστά αρχεία ανα σχολική μονάδα
* Δυνατότητα αποστολής αποτελεσμάτων σε κάθε σχολική μονάδα με ηλεκτρονικό ταχυδρομείο


## Εγκατάσταση

Κατεβάστε τον κώδικα :

```
$ git clone https://github.com/dideher/ekloges_dieuthinton.git
```

Δημιουργήστε το `virtualenv` της Python

```
$ cd ekloges_dieuthinton
$ virtualenv v
$ source v/bin/activate
(v)$ pip install -U -r requirements.txt
```

Δοκιμάστε :

```
(v)$ ./ekloges.py -h
usage: ekloges.py [-h] -r8 REPORT8 [--schoolId SCHOOLID]

optional arguments:
  -h, --help            show this help message and exit
  -r8 REPORT8, --report8 REPORT8
                        path to myschool report 8
  -r16 REPORT16, --report16 REPORT16
                        path to myschool report 16
  --schoolId SCHOOLID   generate report for the given school id
  --filter0             filter employees without teaching hour(s)
```

## Οδηγίες Χρήσης

Για να χρησιμοποιήσεται την γεννητρία θα πρέπει πρώτα να κατεβάσετε τα παρακάτω report απο το MySchool :

* Στατιστικό 8 - `Κατάλογος Εκπαιδευτικών σε Σχολικές Μονάδες που Διδάσκουν` (Υποχρεωτικά)
* Στατιστικό 16 - `Κατάλογος Εκπαιδευτικών που Απουσιάζουν από Σχολικές Μονάδες` (Προαιρετικά)

# Παράμετροι Χρήσης

Η γεννήτρια υποστηρίζει τις παρακάτω παραμέτρους :

* `-r8` - το path για το στατιστικό 8 `Κατάλογος Εκπαιδευτικών σε Σχολικές Μονάδες που Διδάσκουν` του MySchool
* `-r16` - το path για το στατιστικό 16 `Κατάλογος Εκπαιδευτικών που Απουσιάζουν από Σχολικές Μονάδες` του MySchool
* `--schoolId` - ο κωδικός της σχολικής μονάδος (πχ 1740070) για την οποία θέλετε να δημιουργηθεί ο κατάλογος των εκλογέων.
  Αν δεν ορίσεται αυτή την παράμετρο, τότε η γεννήτρια θα επεξεργαστεί όλες τις σχολικές μονάδες που περιέχονται στο στατιστικό 8.
* `--filter0` - αν ορισθεί, τότε η γεννητρία κατά την επεξεργασία της εκάστοτε σχολικής μονάδας, δεν θα λάβει υπόψιν της τους
 εκπαιδευτικούς χωρίς Α' ή Β' ανάθεση. Η λειτουργία αυτή είναι χρήσιμη στις περιπτώσεις που η σχολική μονάδα δεν έχει αναθέσει
 διδακτικό έργο στον εκπαιδευτικό λόγω απουσίας, αλλά *δεν* έχει καταχωρήσει την απαραίτητη απουσία (πονεμένη ιστορία)
* `--rejected` - αν ορισθεί, τότε η γεννήτρια θα εκπτυπώσει και συμπληρωματικό πίνακα με τους αποκλεισμένους απο την ψηφοφορία μαζί με μια
σύντομη αιτιολόγηση

### Παράδειγμα

Έστω ότι κατεβάσαμε το report 8 στο `/tmp/CSV_2015-06-02-130003.csv` και θέλουμε να δημιουργήσουμε τον κατάλογο εκλογέων της σχολικής μονάδας με κωδικό `1740070`. Σε αυτή την περίπτωση θα πρέπει να εκτελέσουμε :

```
(v)$ ./ekloges.py -r8 /tmp/CSV_2015-06-02-130003.csv --schoolId 1740070

::::::
:: 1ο ΗΜΕΡΗΣΙΟ ΕΠΑΛ ΗΡΑΚΛΕΙΟΥ - (1740070) ::
::::::

+----+--------+-----------+---------------+------------------+--------------+------------+-------------------------------+-------------------------------------+--------+-----------+
| #  |   ΑΜ   |    ΑΦΜ    |       ΕΠΩΝΥΜΟ |            ΟΝΟΜΑ |    ΠΑΤΡΩΝΥΜΟ | ΕΙΔΙΚΟΤΗΤΑ |                ΣΧΕΣΗ ΕΡΓΑΣΙΑΣ |              ΤΟΠΟΘΕΤΗΣΗ ΣΤΗΝ ΜΟΝΑΔΑ | ΩΡΑΡΙΟ | ΑΝΑΘΕΣΕΙΣ |
+----+--------+-----------+---------------+------------------+--------------+------------+-------------------------------+-------------------------------------+--------+-----------+
| 1  | 111111 | 222222222 |        ΚΩΣΤΑΣ |        ΑΓΓΕΛΑΚΗΣ |        ΗΛΙΑΣ |       ΠΕ20 |                       Μόνιμος |                            Οργανικά |     18 |        12 |
| 2  | 333333 | 444444444 |     ΠΑΡΑΣΚΕΥΗ |            ΑΛΑΝΗ |     ΓΕΩΡΓΙΟΣ |    ΠΕ17.01 |                       Μόνιμος |                            Οργανικά |     21 |         0 |
```

